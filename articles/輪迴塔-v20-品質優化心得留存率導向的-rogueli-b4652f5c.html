<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="輪迴塔 v2.0 品質優化心得：留存率導向的 Roguelike 設計模式">
  <title>輪迴塔 v2.0 品質優化心得：留存率導向的 Roguelike 設計模式 | 知識庫</title>
  <link rel="stylesheet" href="../styles.css">
</head>
<body>
  <div class="reading-progress" id="readingProgress"></div>
  <header>
    <div class="container">
      <a href="../" class="logo">知識庫</a>
      <nav>
        <a href="../#buddhism">佛學</a>
        <a href="../#thinking">思維方法</a>
        <a href="../#ai">AI技術</a>
        <a href="../#claude">Claude Code</a>
        <a href="../#game">遊戲</a>
      </nav>
      <button class="theme-toggle" onclick="toggleTheme()" aria-label="切換深色模式">
        <span class="theme-icon">&#9680;</span>
      </button>
    </div>
  </header>

  <main class="container">
    <article>
      <div class="article-header">
        <span class="category-badge category-game">遊戲開發</span>
        <h1>輪迴塔 v2.0 品質優化心得：留存率導向的 Roguelike 設計模式</h1>
        <div class="article-meta">
          <span class="date">2026-02-19</span>
          <span class="reading-time">3 分鐘閱讀</span>
          <div class="tags"><span class="tag">遊戲設計</span><span class="tag">Roguelike</span><span class="tag">HTML5</span><span class="tag">Canvas</span><span class="tag">品質優化</span><span class="tag">留存率</span><span class="tag">combo系統</span><span class="tag">適應性難度</span></div>
        </div>
      </div>

      <details class="article-toc" open>
        <summary>目錄</summary>
        <ol>
          <li><a href="#專案背景">專案背景</a></li><li><a href="#核心優化策略-以留存率為導向">核心優化策略：以留存率為導向</a></li>  <li><a href="#1-平台可達性保證-消除不公平死亡">1. 平台可達性保證（消除不公平死亡）</a></li>  <li><a href="#2-difficulty-director-適應性難度">2. Difficulty Director（適應性難度）</a></li>  <li><a href="#3-combo-連鎖系統-正向回饋迴圈">3. Combo 連鎖系統（正向回饋迴圈）</a></li>  <li><a href="#4-慈悲救度-mercy-mechanic">4. 慈悲救度（Mercy Mechanic）</a></li>  <li><a href="#5-觸控操控重構-分區觸控">5. 觸控操控重構（分區觸控）</a></li>  <li><a href="#6-浮動文字回饋-floating-text">6. 浮動文字回饋（Floating Text）</a></li>  <li><a href="#7-新手引導-tutorial-zone">7. 新手引導（Tutorial Zone）</a></li>  <li><a href="#8-道具視覺改善">8. 道具視覺改善</a></li><li><a href="#技術實作要點">技術實作要點</a></li><li><a href="#品質自檢結果">品質自檢結果</a></li><li><a href="#適用場景">適用場景</a></li>
        </ol>
      </details>

      <div class="article-content">
        <h1>輪迴塔 v2.0 品質優化心得</h1>
<h2 id="專案背景">專案背景</h2>
<p>輪迴塔（Tower of Samsara）是一款佛學主題的無限攀塔 Roguelike 遊戲，v1.0 基礎架構良好（requestAnimationFrame + Fixed Timestep + 物件池 + 狀態機），但在「讓人更愛玩、更持續玩」方面有明確的改善空間。</p>
<h2 id="核心優化策略-以留存率為導向">核心優化策略：以留存率為導向</h2>
<h3 id="1-平台可達性保證-消除不公平死亡">1. 平台可達性保證（消除不公平死亡）</h3>
<p><strong>問題</strong>：v1.0 平台 x 座標完全隨機，可能產生「物理上不可能跳到」的平台，玩家因非自身失誤而死亡。</p>
<p><strong>解法</strong>：追蹤 <code>lastPlatformX</code>，新平台 x 座標限制在前一平台 ±100 單位內（玩家最大水平跳躍距離約 ±120）。</p>
<p><strong>效果</strong>：每一次死亡都是玩家的判斷失誤，而非系統不公。這是 PCG 的「受控隨機」原則（參考 KB 中 Roguelike PCG 指南）。</p>
<h3 id="2-difficulty-director-適應性難度">2. Difficulty Director（適應性難度）</h3>
<p><strong>問題</strong>：v1.0 難度純靠時間線性增加，不考慮玩家實際表現。</p>
<p><strong>解法</strong>：追蹤最近死亡時間戳 <code>recentDeaths[]</code>，若短時間內多次死亡則自動降低 30% 難度。基礎難度曲線也放緩（3600→4200 幀才翻倍）。</p>
<p><strong>設計理念</strong>：好的難度曲線應該是「Flow Channel」——不太簡單讓人無聊，不太難讓人放棄。</p>
<h3 id="3-combo-連鎖系統-正向回饋迴圈">3. Combo 連鎖系統（正向回饋迴圈）</h3>
<p><strong>問題</strong>：v1.0 收集禪字只有固定 +50 分和粒子效果，缺乏連續收集的動力。</p>
<p><strong>解法</strong>：</p>
<ul>
<li>3 秒內連續收集觸發 combo，分數按 <code>50 × (1 + combo × 0.3)</code> 計算</li>
<li>combo 計數顯示在 HUD 中央，附帶時間條</li>
<li>里程碑獎勵：5 combo = 「五蘊皆空 +200」、10 combo = 「十善業道 +500 + 護盾」</li>
<li>每次 combo 會播放漸高的音效</li>
</ul>
<p><strong>效果</strong>：創造「one more try」的動力——玩家會記住「差一點就到 10 combo 了」而想再玩一次。</p>
<h3 id="4-慈悲救度-mercy-mechanic">4. 慈悲救度（Mercy Mechanic）</h3>
<p><strong>問題</strong>：墜落即死，新手很快放棄。</p>
<p><strong>解法</strong>：每局一次「慈悲救度」——首次觸發死亡時自動向上彈射 + 2 秒護盾。角色周圍有金色光暈提示慈悲未用。HUD 右下角顯示「蓮 慈悲」。</p>
<p><strong>設計理念</strong>：降低初次遊玩挫折，同時不影響高手體驗（高手仍然只有一條命的壓力）。與佛學主題完美契合。</p>
<h3 id="5-觸控操控重構-分區觸控">5. 觸控操控重構（分區觸控）</h3>
<p><strong>問題</strong>：v1.0 用滑動偏移量控制移動，不直覺且常誤操作。</p>
<p><strong>解法</strong>：螢幕分為三區——下方 30% 左半=左移、右半=右移；上方 70%=跳躍。按住即持續移動。</p>
<p><strong>效果</strong>：手機操作從「勉強能玩」提升到「流暢自然」。</p>
<h3 id="6-浮動文字回饋-floating-text">6. 浮動文字回饋（Floating Text）</h3>
<p><strong>問題</strong>：得分變化不明顯，玩家不知道自己做了什麼好事。</p>
<p><strong>解法</strong>：物件池管理的浮動文字系統，自動向上飄淺出：</p>
<ul>
<li>收集禪字：顯示「+50」或「+65 x2」</li>
<li>Combo 里程碑：「五蘊皆空 +200」</li>
<li>道具獲取：「護盾」「加速」</li>
<li>樓層里程碑：「10F」「20F」</li>
<li>境界轉換：該道的禪語</li>
</ul>
<h3 id="7-新手引導-tutorial-zone">7. 新手引導（Tutorial Zone）</h3>
<p>前 5 層平台固定為 normal 類型且較寬（65-85px vs 55-80px），手機首 5 秒顯示控制提示（觸控區域標示）。</p>
<h3 id="8-道具視覺改善">8. 道具視覺改善</h3>
<p>從文字符號（<code>++</code>/<code>()</code>/<code>&gt;&gt;</code>）改為 Unicode 圖示（⇈/♠/⚡），外加脈衝光環效果，更直覺可辨識。</p>
<h2 id="技術實作要點">技術實作要點</h2>
<ul>
<li><strong>浮動文字池</strong>：createPool(30, factory)，避免 GC 壓力</li>
<li><strong>isMobile 偵測</strong>：<code>&#x27;ontouchstart&#x27; in window || W &lt; 768</code></li>
<li><strong>Difficulty Director</strong>：用滑動視窗（最近 5 次死亡時間戳）計算適應性係數</li>
<li><strong>Unicode 符號</strong>：程式碼中用 \u escape 確保跨瀏覽器一致</li>
</ul>
<h2 id="品質自檢結果">品質自檢結果</h2>
<ul>
<li>[x] requestAnimationFrame + Fixed Timestep 60FPS</li>
<li>[x] 鍵盤 + 觸控 + 滑鼠三種輸入</li>
<li>[x] 完整狀態機（MENU/PLAYING/PAUSED/GAMEOVER）</li>
<li>[x] 物件池管理（particles 200 + platforms 60 + floatingTexts 30）</li>
<li>[x] 無 console 錯誤</li>
<li>[x] 響應式設計</li>
<li>[x] 暫停功能</li>
</ul>
<h2 id="適用場景">適用場景</h2>
<p>這些設計模式可應用於任何 HTML5 Canvas 無限跑酷/攀塔遊戲的留存率優化。</p>
<hr>
<p><em>研究日期：2026-02-19</em></p>

      </div>

      <nav class="article-nav"><a href="html5-遊戲存檔系統設計完整指南localstorag-cba377cc.html" class="nav-prev"><span class="nav-label">&larr; 上一篇</span><span class="nav-title">HTML5 遊戲存檔系統設計完整指南：LocalStorage、IndexedDB、狀態序列化與雲端同步（2026）</span></a><a href="系統-log-審查報告---2026-02-19-7847ef7b.html" class="nav-next"><span class="nav-label">下一篇 &rarr;</span><span class="nav-title">系統 Log 審查報告 - 2026-02-19</span></a></nav>

      <a href="../" class="back-link">&larr; 返回首頁</a>
    </article>
  </main>

  <button class="back-to-top" id="backToTop" onclick="window.scrollTo({top:0,behavior:'smooth'})" aria-label="回到頂部">&uarr;</button>

  <footer>
    <div class="container">
      <p>Powered by RAG Knowledge Base</p>
    </div>
  </footer>
  <script>
    function toggleTheme(){const b=document.body;b.classList.toggle('dark');localStorage.setItem('theme',b.classList.contains('dark')?'dark':'light')}
    if(localStorage.getItem('theme')==='dark')document.body.classList.add('dark');
    window.addEventListener('scroll',function(){
      const prog=document.getElementById('readingProgress');
      const btn=document.getElementById('backToTop');
      const h=document.documentElement.scrollHeight-window.innerHeight;
      const pct=h>0?(window.scrollY/h)*100:0;
      prog.style.width=pct+'%';
      btn.classList.toggle('visible',window.scrollY>300);
    });
  </script>
</body>
</html>
