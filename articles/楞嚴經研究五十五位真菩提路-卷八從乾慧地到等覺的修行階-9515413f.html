<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="楞嚴經研究：五十五位真菩提路 — 卷八從乾慧地到等覺的修行階位體系">
  <title>楞嚴經研究：五十五位真菩提路 — 卷八從乾慧地到等覺的修行階位體系 | 知識庫</title>
  <link rel="stylesheet" href="../styles.css">
</head>
<body>
  <div class="reading-progress" id="readingProgress"></div>
  <header>
    <div class="container">
      <a href="../" class="logo">知識庫</a>
      <nav>
        <a href="../#buddhism">佛學</a>
        <a href="../#thinking">思維方法</a>
        <a href="../#ai">AI技術</a>
        <a href="../#claude">Claude Code</a>
        <a href="../#game">遊戲</a>
      </nav>
      <button class="theme-toggle" onclick="toggleTheme()" aria-label="切換深色模式">
        <span class="theme-icon">&#9680;</span>
      </button>
    </div>
  </header>

  <main class="container">
    <article>
      <div class="article-header">
        <span class="category-badge category-buddhism">佛學</span>
        <h1>楞嚴經研究：五十五位真菩提路 — 卷八從乾慧地到等覺的修行階位體系</h1>
        <div class="article-meta">
          <span class="date">2026-02-18</span>
          <span class="reading-time">9 分鐘閱讀</span>
          <div class="tags"><span class="tag">楞嚴經</span><span class="tag">佛學</span><span class="tag">五十五位真菩提路</span><span class="tag">修行階位</span><span class="tag">乾慧地</span><span class="tag">十信</span><span class="tag">十住</span><span class="tag">十行</span></div>
        </div>
      </div>

      <details class="article-toc" open>
        <summary>目錄</summary>
        <ol>
          <li><a href="#主題概述">主題概述</a></li><li><a href="#一-三漸次-修行的前行基礎">一、三漸次 — 修行的前行基礎</a></li>  <li><a href="#第一漸次-除其助因">第一漸次：除其助因</a></li>  <li><a href="#第二漸次-刳其正性">第二漸次：刳其正性</a></li>  <li><a href="#第三漸次-違其現業">第三漸次：違其現業</a></li><li><a href="#二-乾慧地-智慧初萌的門檻">二、乾慧地 — 智慧初萌的門檻</a></li>  <li><a href="#經文重點">經文重點</a></li>  <li><a href="#白話翻譯">白話翻譯</a></li>  <li><a href="#義理解析">義理解析</a></li><li><a href="#三-十信位-信心建立的十個層次">三、十信位 — 信心建立的十個層次</a></li><li><a href="#四-十住位-安住真如的十種境界">四、十住位 — 安住真如的十種境界</a></li><li><a href="#五-十行位-菩薩大行的十種實踐">五、十行位 — 菩薩大行的十種實踐</a></li><li><a href="#六-十迴向位-功德迴向的十種圓融">六、十迴向位 — 功德迴向的十種圓融</a></li><li><a href="#七-四加行位-入地前的最後衝刺">七、四加行位 — 入地前的最後衝刺</a></li><li><a href="#八-十地-聖位菩薩的十重境界">八、十地 — 聖位菩薩的十重境界</a></li><li><a href="#九-等覺-一生補處的究竟果位">九、等覺 — 一生補處的究竟果位</a></li>  <li><a href="#經文要旨">經文要旨</a></li>  <li><a href="#義理分析">義理分析</a></li><li><a href="#十-階位總覽與修行要義">十、階位總覽與修行要義</a></li>  <li><a href="#完整架構">完整架構</a></li>  <li><a href="#楞嚴經位次論的四大特色">楞嚴經位次論的四大特色</a></li><li><a href="#與已有研究的關聯">與已有研究的關聯</a></li>  <li><a href="#縱向承接">縱向承接</a></li>  <li><a href="#橫向比較">橫向比較</a></li><li><a href="#修行應用">修行應用</a></li>  <li><a href="#一-自我定位">一、自我定位</a></li>  <li><a href="#二-三漸次的日常實踐">二、三漸次的日常實踐</a></li>  <li><a href="#三-信心的重要性">三、信心的重要性</a></li>  <li><a href="#四-迴向的精神">四、迴向的精神</a></li><li><a href="#參考來源">參考來源</a></li>
        </ol>
      </details>

      <div class="article-content">
        <h1>楞嚴經研究：五十五位真菩提路 — 卷八從乾慧地到等覺的修行階位體系</h1>
<h2 id="主題概述">主題概述</h2>
<p>《大佛頂首楞嚴經》卷八是全經修行體系中最完整的「位次論」，佛陀應阿難之問，系統開示了從凡夫發心到究竟成佛的完整修證路線圖。這套體系被稱為「五十五位真菩提路」（或合三漸次、乾慧地、妙覺共計六十位），涵蓋三漸次、乾慧地、十信、十住、十行、十迴向、四加行、十地、等覺等階位。楞嚴經的位次論有其獨特之處：它以「不生滅心為本修因」貫穿始終，每一階位都是在「如來藏妙真如性」上破除一分無明、證得一分法身的過程，體現了「全真即妄、全妄即真」的圓教特色。</p>
<hr>
<h2 id="一-三漸次-修行的前行基礎">一、三漸次 — 修行的前行基礎</h2>
<p>在進入五十五位正式階位之前，佛陀先開示三個漸進的前行階段，為修行者奠定穩固的基礎：</p>
<h3 id="第一漸次-除其助因">第一漸次：除其助因</h3>
<p>「一者修習，除其助因。」修行者首先斷除五辛（蔥、蒜、韭、薤、興渠），因為這些食物生食增恚、熟食助淫，會障礙修行。此外，還需要遠離殺盜淫妄等惡業的外在助緣。</p>
<h3 id="第二漸次-刳其正性">第二漸次：刳其正性</h3>
<p>「二者真修，刳其正性。」即嚴持四種清淨明誨（斷淫、斷殺、斷偷、斷大妄語），這是「刳」（挖除）煩惱根本的核心工夫。四種清淨明誨是楞嚴大定的基礎，承接卷六至卷七的戒律開示。</p>
<h3 id="第三漸次-違其現業">第三漸次：違其現業</h3>
<p>「三者增進，違其現業。」在持戒清淨的基礎上，進一步以定慧力反觀六根，不隨六塵境界流轉。「旋元自歸」，使六根圓拔，超越色界、無色界的現行業力。</p>
<hr>
<h2 id="二-乾慧地-智慧初萌的門檻">二、乾慧地 — 智慧初萌的門檻</h2>
<h3 id="經文重點">經文重點</h3>
<blockquote><p>「欲愛乾枯，根境不偶，現前殘質不復續生。執心虛明，純是智慧，慧性明圓，瑩十方界。乾有其慧，名乾慧地。」</p>
</blockquote>
<h3 id="白話翻譯">白話翻譯</h3>
<p>欲愛之心已經乾枯，六根與六塵不再交媾和合，現前的殘餘業質不再續生。心中所持守的是虛明的智慧，純然是智慧的光明，慧性圓明，照耀十方法界。但因尚未與如來法流水相接（未破無明），只是乾有其慧，故名「乾慧地」。</p>
<h3 id="義理解析">義理解析</h3>
<p>「乾慧」之「乾」字頗具深意：如同河床乾涸，欲愛已枯竭，但尚未與佛之法身慧命的活水相接。宣化上人比喻為「有了智慧，但還沒有法的滋潤」。這是從凡夫位跨入聖道的臨界點，如同破曉前最後的黑暗。圓瑛大師指出，乾慧地雖名為「地」，嚴格說尚在菩薩五十五位之前，是進入十信位的基礎。</p>
<hr>
<h2 id="三-十信位-信心建立的十個層次">三、十信位 — 信心建立的十個層次</h2>
<p>十信位是菩薩道的起步，修行者在此建立對佛法的深信不疑：</p>
<table>
<tr><th>位次</th><th>名稱</th><th>經文要旨</th><th>修行重點</th></tr>
<tr><td>1</td><td>信心住</td><td>「陰信常住」</td><td>深信真如本性常住不變</td></tr>
<tr><td>2</td><td>念心住</td><td>「念念明覺」</td><td>念念不離正念，明覺不昧</td></tr>
<tr><td>3</td><td>精進心</td><td>「精進不懈」</td><td>勇猛精進，不退轉道心</td></tr>
<tr><td>4</td><td>慧心住</td><td>「慧性明悟」</td><td>以般若慧觀照實相</td></tr>
<tr><td>5</td><td>定心住</td><td>「定力持心」</td><td>安住禪定，不為外境所動</td></tr>
<tr><td>6</td><td>不退心</td><td>「心進安然」</td><td>信解深固，永不退轉</td></tr>
<tr><td>7</td><td>護法心</td><td>「護持佛法」</td><td>護持正法，自覺覺他</td></tr>
<tr><td>8</td><td>迴向心</td><td>「迴向菩提」</td><td>將所修功德迴向無上菩提</td></tr>
<tr><td>9</td><td>戒心住</td><td>「安住淨戒」</td><td>心與戒一體，自然不犯</td></tr>
<tr><td>10</td><td>願心住</td><td>「發大弘願」</td><td>發四弘誓願，利樂有情</td></tr>
</table>
<p>十信位的特色在於：修行者已經乾枯欲愛、具足智慧光明，但對佛法的理解和修行尚需通過十個層面的信心來穩固。如同建築需要穩固地基，十信是一切修行的根本。</p>
<hr>
<h2 id="四-十住位-安住真如的十種境界">四、十住位 — 安住真如的十種境界</h2>
<p>十住位標誌著修行者從信位進入「住」位，即能夠安住於真如法性之中：</p>
<table>
<tr><th>位次</th><th>名稱</th><th>修行重點</th></tr>
<tr><td>1</td><td>發心住</td><td>以真方便，發菩提心，住佛所住</td></tr>
<tr><td>2</td><td>治地住</td><td>心中發明，清淨所有，如琢如磨</td></tr>
<tr><td>3</td><td>修行住</td><td>自覺覺他，智行增明</td></tr>
<tr><td>4</td><td>生貴住</td><td>行與佛同，入佛種性</td></tr>
<tr><td>5</td><td>方便具足住</td><td>自利利他，方便具足</td></tr>
<tr><td>6</td><td>正心住</td><td>心相不動，居中正住</td></tr>
<tr><td>7</td><td>不退住</td><td>身心合成，日益增長，永不退失</td></tr>
<tr><td>8</td><td>童真住</td><td>十身靈相，一時具足</td></tr>
<tr><td>9</td><td>法王子住</td><td>形成出胎，親為佛子</td></tr>
<tr><td>10</td><td>灌頂住</td><td>表以成人，如國王之太子受灌頂</td></tr>
</table>
<p>十住位的核心意涵：修行者從「信」進入「住」，如同旅人從暫宿變成定居。每一住位都是在如來藏真心上更深一層地安住，逐步「住」入佛之知見。圓瑛大師以「遊子歸家」為喻——十住即十重回家的過程。</p>
<hr>
<h2 id="五-十行位-菩薩大行的十種實踐">五、十行位 — 菩薩大行的十種實踐</h2>
<p>十行位是菩薩將所住所悟付諸實踐，利益眾生的階段：</p>
<table>
<tr><th>位次</th><th>名稱</th><th>修行重點</th></tr>
<tr><td>1</td><td>歡喜行</td><td>於真如性中，現起歡喜心利益眾生</td></tr>
<tr><td>2</td><td>饒益行</td><td>善能利益一切眾生，饒益無盡</td></tr>
<tr><td>3</td><td>無瞋恨行</td><td>安忍不動，無瞋無恨</td></tr>
<tr><td>4</td><td>無盡行</td><td>種種方便，隨類度化，行無窮盡</td></tr>
<tr><td>5</td><td>離癡亂行</td><td>一切合同，了無差誤，離諸癡亂</td></tr>
<tr><td>6</td><td>善現行</td><td>則於同中，顯現群異，善能現化</td></tr>
<tr><td>7</td><td>無著行</td><td>如是乃至十方虛空，滿足微塵，無所著</td></tr>
<tr><td>8</td><td>尊重行</td><td>種種現前，咸是第一波羅蜜多</td></tr>
<tr><td>9</td><td>善法行</td><td>圓融德相，清淨無漏，善法成就</td></tr>
<tr><td>10</td><td>真實行</td><td>一一清淨，一一皆是無為真如性</td></tr>
</table>
<p>十行位的特色：從自利轉向利他，每一行位都是悲智雙運的體現。經文以「從體起用」描述這一階段——菩薩從安住真如（十住）之體，起發度化眾生之用。</p>
<hr>
<h2 id="六-十迴向位-功德迴向的十種圓融">六、十迴向位 — 功德迴向的十種圓融</h2>
<p>十迴向位是將前面所修的功德，迴向三處：迴自向他、迴因向果、迴事向理。</p>
<table>
<tr><th>位次</th><th>名稱</th><th>修行重點</th></tr>
<tr><td>1</td><td>救護一切眾生離眾生相迴向</td><td>迴向眾生而離眾生相</td></tr>
<tr><td>2</td><td>不壞迴向</td><td>壞世間相而不壞於真如法性</td></tr>
<tr><td>3</td><td>等一切佛迴向</td><td>本覺之理，湛然常住，與佛平等</td></tr>
<tr><td>4</td><td>至一切處迴向</td><td>覺性遍滿，至一切處</td></tr>
<tr><td>5</td><td>無盡功德藏迴向</td><td>世界眾生互為迴向，功德無盡</td></tr>
<tr><td>6</td><td>隨順平等善根迴向</td><td>於諸佛地，起萬行因，求無上果</td></tr>
<tr><td>7</td><td>隨順等觀一切眾生迴向</td><td>真根既成，十方眾生同一涅槃</td></tr>
<tr><td>8</td><td>真如相迴向</td><td>即一切法，離一切相，真如相現</td></tr>
<tr><td>9</td><td>無縛無著解脫迴向</td><td>智慧自在，無所縛著</td></tr>
<tr><td>10</td><td>法界無量迴向</td><td>圓滿德相，法界無量</td></tr>
</table>
<p>十迴向的深義：將修行所得不自私地保留，而是迴向法界一切眾生。這體現了大乘佛教「自未得度先度人」的菩薩精神。圓瑛大師釋為「迴因向果，迴事向理，迴自向他」三義具足。</p>
<hr>
<h2 id="七-四加行位-入地前的最後衝刺">七、四加行位 — 入地前的最後衝刺</h2>
<p>四加行是從十迴向到十地的過渡階段，名為暖、頂、忍、世第一：</p>
<table>
<tr><th>位次</th><th>名稱</th><th>經文要旨</th><th>譬喻</th></tr>
<tr><td>1</td><td>暖地</td><td>「即以佛覺，用為己心」</td><td>如鑽木取火，先得暖相</td></tr>
<tr><td>2</td><td>頂地</td><td>「心佛二同，善得中道」</td><td>登至山頂，觀見四方</td></tr>
<tr><td>3</td><td>忍地</td><td>「心佛二同，善得明了」</td><td>能忍可境界而不動</td></tr>
<tr><td>4</td><td>世第一地</td><td>「數量銷滅，迷覺中道，二無所目」</td><td>世間中第一，即將入聖</td></tr>
</table>
<p>四加行的關鍵意義：這是「加功用行」的密集修行期。暖地如同鑽木取火時的初暖——道火將生；頂地如登頂遠眺；忍地是能忍所證真理而不退失；世第一地則是世間法中的最高位，即將超凡入聖。</p>
<hr>
<h2 id="八-十地-聖位菩薩的十重境界">八、十地 — 聖位菩薩的十重境界</h2>
<p>進入十地即為聖位菩薩，真正證入法身：</p>
<table>
<tr><th>位次</th><th>名稱</th><th>修行重點</th></tr>
<tr><td>1</td><td>歡喜地</td><td>始破一品無明，證一分法身，歡喜無量</td></tr>
<tr><td>2</td><td>離垢地</td><td>持戒清淨，離諸垢染</td></tr>
<tr><td>3</td><td>發光地</td><td>定慧增明，如光遍照</td></tr>
<tr><td>4</td><td>焰慧地</td><td>智慧之焰，熾然不息</td></tr>
<tr><td>5</td><td>難勝地</td><td>空有雙超，世出世間難可為勝</td></tr>
<tr><td>6</td><td>現前地</td><td>般若智慧，無相現前</td></tr>
<tr><td>7</td><td>遠行地</td><td>超越世間、出世間界限</td></tr>
<tr><td>8</td><td>不動地</td><td>無功用行，任運自在</td></tr>
<tr><td>9</td><td>善慧地</td><td>四無礙辯，善能說法</td></tr>
<tr><td>10</td><td>法雲地</td><td>慈陰妙雲，覆涅槃海</td></tr>
</table>
<p>十地的核心要義：每一地都是「破一品無明，證一分法身」的過程。十地菩薩已是法身大士，具足種種神通妙用，能於十方世界隨類化現。法雲地是十地之極果，「慈陰妙雲」覆蓋一切眾生。</p>
<hr>
<h2 id="九-等覺-一生補處的究竟果位">九、等覺 — 一生補處的究竟果位</h2>
<h3 id="經文要旨">經文要旨</h3>
<p>等覺菩薩已與佛等齊，「如來逆流，如是菩薩順行而至，覺際入交，名為等覺」。但仍有一品無明未盡（「金剛喻定」中的最後一品生相無明），如同「有刺」在衣中。再破此一品無明，即入妙覺——成佛。</p>
<h3 id="義理分析">義理分析</h3>
<p>等覺又名「一生補處」，意為再經一生即可成佛。在楞嚴經的體系中，等覺菩薩的修行已經到達與佛陀幾乎等同的境界，唯有最微細的一品無明（「生相無明」）尚未斷盡。如同明月將滿而差一分，如同黎明前的最後一瞬。彌勒菩薩即為典型的等覺位菩薩。</p>
<hr>
<h2 id="十-階位總覽與修行要義">十、階位總覽與修行要義</h2>
<h3 id="完整架構">完整架構</h3>
<pre><code class="language-plaintext">三漸次（前行）→ 乾慧地（門檻）→
十信（1-10）→ 十住（11-20）→ 十行（21-30）→ 十迴向（31-40）→
四加行（41-44）→ 十地（45-54）→ 等覺（55）→ 妙覺（佛果）</code></pre>
<h3 id="楞嚴經位次論的四大特色">楞嚴經位次論的四大特色</h3>
<ol>
<li><strong>以不生滅心為本修因</strong>：不同於其他經典以漸修為主，楞嚴經強調從一開始就要認取如來藏妙真如性，以此為因地心，才能契入佛之果海。</li>
</ol>
<ol>
<li><strong>破妄即顯真的圓教風格</strong>：每一階位不是「修來」一個新東西，而是「破除」一分無明，讓本具的真如法性自然顯現。如同撥雲見日，日不是新生的。</li>
</ol>
<ol>
<li><strong>與卷一至卷七的呼應</strong>：卷一七處徵心破妄→卷二十番顯見顯真→卷三四三科七大歸如來藏→卷五二十五圓通→卷六四清淨明誨→卷七楞嚴咒加行→卷八五十五位正式修證路線。整部楞嚴經就是這條修行路的完整地圖。</li>
</ol>
<ol>
<li><strong>辨魔的重要性</strong>：緊接卷八位次論之後，卷九至卷十即開示「五十陰魔」，說明修行每一階段可能遇到的障礙和魔境。先知位次方知道路，再辨魔境方保平安——這是楞嚴經獨有的修行安全體系。</li>
</ol>
<hr>
<h2 id="與已有研究的關聯">與已有研究的關聯</h2>
<h3 id="縱向承接">縱向承接</h3>
<p>本篇承接已有多篇楞嚴經研究，在修行體系中的定位如下：</p>
<ul>
<li><strong>卷一「七處徵心」→ 卷二「十番顯見」</strong>：建立「真心非妄心」的見地基礎</li>
<li><strong>卷三四「三科七大如來藏」+ 「富樓那問難」</strong>：確立「萬法唯心」的理論基礎</li>
<li><strong>卷五「二十五圓通」+ 「大勢至念佛圓通」</strong>：提供修行方法</li>
<li><strong>卷六七「四種清淨明誨」+ 「楞嚴神咒」</strong>：奠定戒定基礎</li>
<li><strong>卷八「五十五位真菩提路」（本篇）</strong>：繪製完整修證路線圖</li>
<li><strong>卷八「六道因果」</strong>：揭示不修行的後果</li>
<li><strong>卷九十「五十陰魔」</strong>：提供修行路上的安全指南</li>
<li><strong>「真妄二本與頓漸二修」「歷代註疏」「禪宗影響」</strong>：跨卷義理總論</li>
</ul>
<h3 id="橫向比較">橫向比較</h3>
<p>楞嚴經的五十五位與《華嚴經》的菩薩行位體系高度對應，但楞嚴經更強調「以一心為本」的修行觀。華嚴經的位次偏重「自行」的莊嚴，楞嚴經則同時兼顧「辨魔」的安全。此外，楞嚴經把「四加行」獨立列出（暖、頂、忍、世第一），這在其他經典中較為少見，反映了楞嚴經對修行實踐細節的重視。</p>
<hr>
<h2 id="修行應用">修行應用</h2>
<h3 id="一-自我定位">一、自我定位</h3>
<p>了解五十五位的意義不在於「我現在在哪一位」（凡夫難以自判），而在於明白修行是有方向、有次第的漫長旅程，不可期待一蹴而就，也不必妄自菲薄。</p>
<h3 id="二-三漸次的日常實踐">二、三漸次的日常實踐</h3>
<ul>
<li><strong>除助因</strong>：在飲食、環境、交友上遠離障道因緣</li>
<li><strong>刳正性</strong>：持戒清淨，以四種清淨明誨為日常準則</li>
<li><strong>違現業</strong>：覺察六根攀緣的習慣，練習「旋元自歸」——念頭起時回到覺知本身</li>
</ul>
<h3 id="三-信心的重要性">三、信心的重要性</h3>
<p>十信位告訴我們：修行的根基在「信」。信自己本具如來藏性（信心住）、念念不離正念（念心住）、勇猛精進不懈怠（精進心）。現代修行者可將此十信作為日常自我檢視的清單。</p>
<h3 id="四-迴向的精神">四、迴向的精神</h3>
<p>十迴向教導我們：修行所得的功德不是私有財產。在日常生活中，做了好事、修了功課，都應發心迴向法界眾生，這不僅是慈悲的展現，也是破除「我執」的有力方便。</p>
<hr>
<h2 id="參考來源">參考來源</h2>
<ol>
<li>《大佛頂首楞嚴經》卷八原文（CBETA 大正藏 T19, No. 945）</li>
<li>宣化上人《大佛頂首楞嚴經淺釋》卷八，萬佛聖城</li>
<li>圓瑛大師《大佛頂首楞嚴經講義》卷八</li>
<li>李治華〈《華嚴經》與《楞嚴經》的菩薩階位比較——以十信、十住、十行為主〉，2023 華嚴專宗國際學術研討會論文集</li>
<li>楞嚴寺（Shurangama Temple）楞嚴經第八卷英文講解</li>
<li>維基百科「楞嚴經」「五十二位」條目</li>
<li>淨界法師《楞嚴經講記》</li>
<li>交光真鑑《楞嚴經正脈疏》</li>
</ol>
<hr>
<p><em>研究日期：2026-02-18</em>
<em>研究者：佛學研究助手</em>
<em>任務類型：shurangama（楞嚴經深度研究）</em></p>

      </div>

      <nav class="article-nav"><a href="每日知識庫洞見報告---2026-02-19-47c04c9f.html" class="nav-prev"><span class="nav-label">&larr; 上一篇</span><span class="nav-title">每日知識庫洞見報告 - 2026-02-19</span></a><a href="楞嚴經研究如來藏與阿賴耶識的關係辨析-楞嚴經與唯識學的-273c71c2.html" class="nav-next"><span class="nav-label">下一篇 &rarr;</span><span class="nav-title">楞嚴經研究：如來藏與阿賴耶識的關係辨析 — 楞嚴經與唯識學的對話</span></a></nav>

      <a href="../" class="back-link">&larr; 返回首頁</a>
    </article>
  </main>

  <button class="back-to-top" id="backToTop" onclick="window.scrollTo({top:0,behavior:'smooth'})" aria-label="回到頂部">&uarr;</button>

  <footer>
    <div class="container">
      <p>Powered by RAG Knowledge Base</p>
    </div>
  </footer>
  <script>
    function toggleTheme(){const b=document.body;b.classList.toggle('dark');localStorage.setItem('theme',b.classList.contains('dark')?'dark':'light')}
    if(localStorage.getItem('theme')==='dark')document.body.classList.add('dark');
    window.addEventListener('scroll',function(){
      const prog=document.getElementById('readingProgress');
      const btn=document.getElementById('backToTop');
      const h=document.documentElement.scrollHeight-window.innerHeight;
      const pct=h>0?(window.scrollY/h)*100:0;
      prog.style.width=pct+'%';
      btn.classList.toggle('visible',window.scrollY>300);
    });
  </script>
</body>
</html>
